<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: templates/posts/renderPosts.mjs</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: templates/posts/renderPosts.mjs</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { load } from "../../storage/load.mjs";
import { renderPostBody, renderPostFooter, renderPostHeader } from "./postContent/index.mjs";
import { loadMoreBtn, loader, displayMessage } from "../../constants.mjs";
import { masonry, runMasonryOnAccordion } from "../../ux/layout/masonry.mjs";

/**
 * Generates an HTML element for each social media post passed in.
 * The function distinguishes posts posted by the logged in user and posts with media attachements from the rest of the posts.
 * The HTML returned uses the bootstrap elements "card" and contains the CSS-class to pass it into a masonry layout.
 * @param {(object|object[])} postData An array of objects or a single object conatining of social media post(s)
 * @returns {string} Returns a HTML elemement for each social media post passed into the function, displaying the post
 * @uses load To fetch the details of the logged in user from localstorage
 * @uses renderPostHeader To generate the HTML element for the card/post HEADER
 * @uses renderPostBody To generate the HTML element for the card/post BODY
 * @uses renderPostFooter To generate the HTML element for the card/post FOOTER
 */
export function postTemplate(postData) {
  const author = load("profile");
  const header = renderPostHeader(postData);
  const body = renderPostBody(postData);
  const footer = renderPostFooter(postData);

  const card = document.createElement("div");
  card.classList.add("card", "post-thread", "post-photo", "mb-4", "masonry-content");
  card.append(header, body, footer);

  const cardContainer = document.createElement("div");
  cardContainer.classList.add("masonry-brick");
  cardContainer.append(card);

  if (author.name === postData.author.name) {
    card.classList.add("your-post");
  }
  if (postData.media) {
    cardContainer.classList.add("media-masonry-brick");
  }
  return cardContainer;
}

/**
 * Appends a -- SINGLE -- HTML element generated by the postTemplate function to a selected HTML parent element
 * @param {object} post One social media post passed down to the postTemplate function
 * @param {string} parent The HTML parent element that appends the social media post
 * @uses postTemplate To generate an HTML element containing the post
 * @uses masonry To stack the posts in a masonry layout
 * @uses runMasonryOnAccordion To listen for the opening and closing of the accordion elements, and restack the posts in masonry layout each time
 */
export function renderPostTemplate(post, parent) {
  parent.append(postTemplate(post));
  masonry();
  runMasonryOnAccordion();
}

/**
 * Appends -- MULTIPLE -- HTML elements generated by the postTemplate function to a selected HTML parent element
 * The funciton breaks at 16 posts.
 * If theres no posts passed down it console.logs the message "no posts in this search or filter".
 * @param {object[]} postsList An array of social media posts passed down to the postTemplate function
 * @param {string} parent The HTML parent element that appends the social media posts
 * @uses postTemplate To generate a HTML element for each social media post
 * @uses masonry To stack the posts in a masonry layout
 * @uses runMasonryOnAccordion To listen for the opening and closing of the accordion elements, and restack the posts in masonry layout each time
 */

export function renderPostTemplates(postsList, parent) {
  if (postsList.length === 0 || !postsList) {
    loader.style.display = "none";
    loadMoreBtn.style.display = "none";
    displayMessage.innerText = "there's no posts matching this search or filter";
  } else {
    displayMessage.innerText = "";

    for (let i = 0; i &lt; postsList.length; i++) {
      parent.append(postTemplate(postsList[i]));
    }
    loader.style.display = "none";
    masonry();
    runMasonryOnAccordion();
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#accordionResize">accordionResize</a></li><li><a href="global.html#commentsHTML">commentsHTML</a></li><li><a href="global.html#displayCommentsAccordion">displayCommentsAccordion</a></li><li><a href="global.html#displayReactionsAccordion">displayReactionsAccordion</a></li><li><a href="global.html#insertUrlParam">insertUrlParam</a></li><li><a href="global.html#masonry">masonry</a></li><li><a href="global.html#masonryOnChange">masonryOnChange</a></li><li><a href="global.html#openPostAsModal">openPostAsModal</a></li><li><a href="global.html#postTemplate">postTemplate</a></li><li><a href="global.html#reactionsHTML">reactionsHTML</a></li><li><a href="global.html#removeModalFromDOM">removeModalFromDOM</a></li><li><a href="global.html#removeUrlParameter">removeUrlParameter</a></li><li><a href="global.html#renderPostBody">renderPostBody</a></li><li><a href="global.html#renderPostFooter">renderPostFooter</a></li><li><a href="global.html#renderPostHeader">renderPostHeader</a></li><li><a href="global.html#renderPostTemplate">renderPostTemplate</a></li><li><a href="global.html#renderPostTemplates">renderPostTemplates</a></li><li><a href="global.html#resizeAllMasonryItems">resizeAllMasonryItems</a></li><li><a href="global.html#resizeMasonryItem">resizeMasonryItem</a></li><li><a href="global.html#runMasonryOnAccordion">runMasonryOnAccordion</a></li><li><a href="global.html#waitForImages">waitForImages</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Sun Mar 10 2024 19:52:42 GMT+0700 (Indochina Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
